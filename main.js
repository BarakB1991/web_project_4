!function(){"use strict";var e=class{constructor(e,t){this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._formElement=t}resetValidation(){const e=[...this._formElement.querySelectorAll(this._inputSelector)],t=this._formElement.querySelector(this._submitButtonSelector);e.forEach((e=>{this._hideInputError(e)})),this._toggleButtonState(e,t)}_hideInputError(e){const t=this._formElement.querySelector("#".concat(e.id,"-error"));e.classList.remove(this._inputErrorClass),t.textContent="",t.classList.remove(this._errorClass)}_toggleButtonState(e,t){e.some((e=>!e.validity.valid))?(t.classList.add(this._inactiveButtonClass),t.disabled=!0):(t.classList.remove(this._inactiveButtonClass),t.disabled=!1)}_showInputError(e){const t=this._formElement.querySelector("#".concat(e.id,"-error"));e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._errorClass)}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}_setEventListeners(){const e=[...this._formElement.querySelectorAll(this._inputSelector)],t=this._formElement.querySelector(this._submitButtonSelector);e.forEach((s=>{s.addEventListener("input",(()=>{this._checkInputValidity(s),this._toggleButtonState(e,t)}))}))}enableValidation(){this._formElement.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}};function t(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class s{constructor(e,s,n){t(this,"_addEventListeners",(()=>{this._element.querySelector(".card__like-btn").addEventListener("click",this._handleLikeButton),this._element.querySelector(".card__delete-btn").addEventListener("click",this._handleDeleteButton),this._element.querySelector(".card__img").addEventListener("click",(()=>this._handlePreviewPicture()))})),t(this,"_handleDeleteButton",(e=>{e.stopPropagation(),this._element.remove(),this._element=null})),t(this,"_handleLikeButton",(e=>{e.stopPropagation(),e.target.classList.toggle("card__like-btn_active")})),t(this,"_handlePreviewPicture",(()=>{this._onImageClick({link:this._link,name:this._name})})),t(this,"renderCard",(()=>{this._element=this._template.cloneNode(!0);const e=this._element.querySelector(".card__img");return e.src=this._link,e.alt=this._name,this._element.querySelector(".card__title").textContent=this._name,this._addEventListeners(),this._element})),this._name=e.name,this._link=e.link,this._template=document.querySelector(s).content.querySelector(".card"),this._onImageClick=n}}function n(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class r{constructor(e){n(this,"_handleMouseDown",(e=>{(e.target.classList.contains("popup")||e.target.classList.contains("popup__close-btn"))&&this.close()})),n(this,"_handleEscClose",(e=>{e.preventDefault(),"Escape"===e.key&&this.close()})),this._popup=document.querySelector(e)}open(){this._popup.classList.add("popup_visible"),document.addEventListener("keyup",this._handleEscClose),this._popup.addEventListener("mousedown",this._handleMouseDown)}close(){this._popup.classList.remove("popup_visible"),document.removeEventListener("keyup",this._handleEscClose),this._popup.removeEventListener("mousedown",this._handleMouseDown)}}class o extends r{constructor(e,t){super(e),this.handleSubmit=t,this._form=this._popup.querySelector(".popup__form")}_getInputValues(){const e=[...this._form.querySelectorAll(".popup__input")],t={};return e.forEach((e=>{t[e.name]=e.value})),t}setEventListeners(){this._form.addEventListener("submit",(e=>{e.preventDefault(),this.handleSubmit(this._getInputValues()),this.close()}))}open(){super.open()}close(){super.close(),this._form.reset()}}const i=document.querySelector(".popup_type_edit-profile"),l=document.querySelector(".popup_type_add-card"),a=document.querySelector(".profile"),c=a.querySelector(".profile__name"),u=a.querySelector(".profile__about"),p=document.querySelector("#add-card-form"),_=document.querySelector("#edit-profile-form"),d=_.querySelector("#input-name"),h=_.querySelector("#input-profession"),m=(p.querySelector("#input-card-title"),p.querySelector("#input-image-link"),document.querySelector(".popup_type_image")),y=(m.querySelector(".popup__title_type_image"),m.querySelector(".popup__image"),a.querySelector(".profile__edit-btn")),f=a.querySelector(".profile__add-btn");document.querySelector(".cards__list");const v=new class{constructor(e){let{name:t,profession:s}=e;this._name=t,this._profession=s}getUserInfo(){return{name:this._name.textContent,profession:this._profession.textContent}}setUserInfo(e){let{name:t,profession:s}=e;this._name.textContent=t,this._profession.textContent=s}}({name:c,profession:u});v.setUserInfo({name:"Abraham Lincoln",profession:"A founding Father"});const S=new class extends r{constructor(e){var t,s;super(e),s=e=>{let{link:t,name:s}=e;super.open();const n=this._popup.querySelector(".popup__title_type_image"),r=this._popup.querySelector(".popup__image");n.textContent=s,r.src=t,r.alt=s},(t="open")in this?Object.defineProperty(this,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):this.open=s}}(".popup_type_image");function b(e){const t=new s(e,"#card-template",S.open).renderCard();E.addItem(t)}const E=new class{constructor(e,t){let{items:s,renderer:n}=t;this._items=s,this._renderer=n,this._container=document.querySelector(e)}addItem(e){this._container.prepend(e)}renderer(){this._items.forEach((e=>{this._renderer(e)}))}}(".cards__list",{items:[{name:"Yosemite Valley",link:"https://code.s3.yandex.net/web-code/yosemite.jpg"},{name:"Lake Louise",link:"https://code.s3.yandex.net/web-code/lake-louise.jpg"},{name:"Bald Mountains",link:"https://code.s3.yandex.net/web-code/bald-mountains.jpg"},{name:"Latemar",link:"https://code.s3.yandex.net/web-code/latemar.jpg"},{name:"Vanoise National Park",link:"https://code.s3.yandex.net/web-code/vanoise.jpg"},{name:"Lago di Braies",link:"https://code.s3.yandex.net/web-code/lago.jpg"}],renderer:b});E.renderer();const g=new o(".popup_type_edit-profile",(e=>{v.setUserInfo(e)})),L=new o(".popup_type_add-card",(e=>{const{cardtitle:t,imagelink:s}=e;b({name:t,link:s})}));g.setEventListeners(),L.setEventListeners();const q={inputSelector:".popup__input",submitButtonSelector:".popup__submit-btn",inactiveButtonClass:"popup__submit-btn_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_visible"},k=new e(q,l),C=new e(q,i);y.addEventListener("click",(()=>{g.open();const{name:e,profession:t}=v.getUserInfo();d.value=e,h.value=t})),f.addEventListener("click",(()=>{L.open(),k.resetValidation()})),k.enableValidation(),C.enableValidation()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsIm1hcHBpbmdzIjoieUJBMkVBLE1BM0VBLE1BQ0VBLFlBQVlDLEVBQVVDLEdBQ3BCQyxLQUFLQyxlQUFpQkgsRUFBU0ksY0FDL0JGLEtBQUtHLHNCQUF3QkwsRUFBU00scUJBQ3RDSixLQUFLSyxxQkFBdUJQLEVBQVNRLG9CQUNyQ04sS0FBS08saUJBQW1CVCxFQUFTVSxnQkFDakNSLEtBQUtTLFlBQWNYLEVBQVNZLFdBRTVCVixLQUFLVyxhQUFlWixFQUd0QmEsa0JBQ0UsTUFBTUMsRUFBZ0IsSUFBSWIsS0FBS1csYUFBYUcsaUJBQWlCZCxLQUFLQyxpQkFDNURjLEVBQWdCZixLQUFLVyxhQUFhSyxjQUFjaEIsS0FBS0csdUJBQzNEVSxFQUFjSSxTQUFRQyxJQUNwQmxCLEtBQUttQixnQkFBZ0JELE1BRXZCbEIsS0FBS29CLG1CQUFtQlAsRUFBZUUsR0FHekNJLGdCQUFnQkQsR0FDZCxNQUFNRyxFQUFlckIsS0FBS1csYUFBYUssY0FBbEIsV0FBb0NFLEVBQWFJLEdBQWpELFdBRXJCSixFQUFhSyxVQUFVQyxPQUFPeEIsS0FBS08sa0JBQ25DYyxFQUFhSSxZQUFjLEdBQzNCSixFQUFhRSxVQUFVQyxPQUFPeEIsS0FBS1MsYUFHckNXLG1CQUFtQlAsRUFBZUUsR0FDUkYsRUFBY2EsTUFBS1IsSUFBaUJBLEVBQWFTLFNBQVNDLFNBRWhGYixFQUFjUSxVQUFVTSxJQUFJN0IsS0FBS0ssc0JBQ2pDVSxFQUFjZSxVQUFXLElBRXpCZixFQUFjUSxVQUFVQyxPQUFPeEIsS0FBS0ssc0JBQ3BDVSxFQUFjZSxVQUFXLEdBSTdCQyxnQkFBZ0JiLEdBQ2QsTUFBTUcsRUFBZXJCLEtBQUtXLGFBQWFLLGNBQWxCLFdBQW9DRSxFQUFhSSxHQUFqRCxXQUVyQkosRUFBYUssVUFBVU0sSUFBSTdCLEtBQUtPLGtCQUNoQ2MsRUFBYUksWUFBY1AsRUFBYWMsa0JBQ3hDWCxFQUFhRSxVQUFVTSxJQUFJN0IsS0FBS1MsYUFHbEN3QixvQkFBb0JmLEdBQ2RBLEVBQWFTLFNBQVNDLE1BQ3hCNUIsS0FBS21CLGdCQUFnQkQsR0FFckJsQixLQUFLK0IsZ0JBQWdCYixHQUl6QmdCLHFCQUNFLE1BQU1yQixFQUFnQixJQUFJYixLQUFLVyxhQUFhRyxpQkFBaUJkLEtBQUtDLGlCQUM1RGMsRUFBZ0JmLEtBQUtXLGFBQWFLLGNBQWNoQixLQUFLRyx1QkFFM0RVLEVBQWNJLFNBQVFDLElBQ3BCQSxFQUFhaUIsaUJBQWlCLFNBQVMsS0FDckNuQyxLQUFLaUMsb0JBQW9CZixHQUN6QmxCLEtBQUtvQixtQkFBbUJQLEVBQWVFLFNBSzdDcUIsbUJBQ0VwQyxLQUFLVyxhQUFhd0IsaUJBQWlCLFVBQVVFLElBQzNDQSxFQUFJQyxvQkFFTnRDLEtBQUtrQyx1Qix3SEN2RU0sTUFBTUssRUFDbkIxQyxZQUFZMkMsRUFBVUMsRUFBc0JDLEdBQWMsNkJBUXJDLEtBQ0ExQyxLQUFLMkMsU0FBUzNCLGNBQWMsbUJBQ3BDbUIsaUJBQWlCLFFBQVNuQyxLQUFLNEMsbUJBRWpCNUMsS0FBSzJDLFNBQVMzQixjQUFjLHFCQUNwQ21CLGlCQUFpQixRQUFTbkMsS0FBSzZDLHFCQUV6QjdDLEtBQUsyQyxTQUFTM0IsY0FBYyxjQUNwQ21CLGlCQUFpQixTQUFTLElBQU1uQyxLQUFLOEMsNkJBaEJJLDhCQW1CcENULElBQ3BCQSxFQUFJVSxrQkFDSi9DLEtBQUsyQyxTQUFTbkIsU0FDZHhCLEtBQUsyQyxTQUFXLFFBdEJ3Qyw0QkF5QnRDTixJQUNsQkEsRUFBSVUsa0JBQ0pWLEVBQUlXLE9BQU96QixVQUFVMEIsT0FBTyw0QkEzQjRCLGdDQThCbEMsS0FDdEJqRCxLQUFLa0QsY0FBYyxDQUFDQyxLQUFNbkQsS0FBS29ELE1BQU9DLEtBQU1yRCxLQUFLc0QsV0EvQk8scUJBa0M3QyxLQUNYdEQsS0FBSzJDLFNBQVczQyxLQUFLdUQsVUFBVUMsV0FBVSxHQUN6QyxNQUFNQyxFQUFZekQsS0FBSzJDLFNBQVMzQixjQUFjLGNBTTlDLE9BTEF5QyxFQUFVQyxJQUFNMUQsS0FBS29ELE1BQ3JCSyxFQUFVRSxJQUFNM0QsS0FBS3NELE1BQ3JCdEQsS0FBSzJDLFNBQVMzQixjQUFjLGdCQUFnQlMsWUFBY3pCLEtBQUtzRCxNQUMvRHRELEtBQUs0RCxxQkFFRTVELEtBQUsyQyxZQXpDWjNDLEtBQUtzRCxNQUFRZCxFQUFTYSxLQUN0QnJELEtBQUtvRCxNQUFRWixFQUFTVyxLQUN0Qm5ELEtBQUt1RCxVQUFZTSxTQUFTN0MsY0FBY3lCLEdBQXNCcUIsUUFBUTlDLGNBQWMsU0FFcEZoQixLQUFLa0QsY0FBZ0JSLEcsd0hDTlYsTUFBTXFCLEVBQ25CbEUsWUFBWW1FLEdBQWUsMkJBZ0JSM0IsS0FDYkEsRUFBSVcsT0FBT3pCLFVBQVUwQyxTQUFTLFVBQVk1QixFQUFJVyxPQUFPekIsVUFBVTBDLFNBQVMsc0JBQzFFakUsS0FBS2tFLFdBbEJrQiwwQkFzQlQ3QixJQUNoQkEsRUFBSUMsaUJBQ1ksV0FBWkQsRUFBSThCLEtBQ05uRSxLQUFLa0UsV0F4QlBsRSxLQUFLb0UsT0FBU1AsU0FBUzdDLGNBQWNnRCxHQUd2Q0ssT0FDRXJFLEtBQUtvRSxPQUFPN0MsVUFBVU0sSUFBSSxpQkFDMUJnQyxTQUFTMUIsaUJBQWlCLFFBQVNuQyxLQUFLc0UsaUJBQ3hDdEUsS0FBS29FLE9BQU9qQyxpQkFBaUIsWUFBYW5DLEtBQUt1RSxrQkFHakRMLFFBQ0VsRSxLQUFLb0UsT0FBTzdDLFVBQVVDLE9BQU8saUJBQzdCcUMsU0FBU1csb0JBQW9CLFFBQVN4RSxLQUFLc0UsaUJBQzNDdEUsS0FBS29FLE9BQU9JLG9CQUFvQixZQUFheEUsS0FBS3VFLG1CQ1p2QyxNQUFNRSxVQUFzQlYsRUFDekNsRSxZQUFZbUUsRUFBZVUsR0FDekJDLE1BQU1YLEdBQ05oRSxLQUFLMEUsYUFBZUEsRUFDcEIxRSxLQUFLNEUsTUFBUTVFLEtBQUtvRSxPQUFPcEQsY0FBYyxnQkFHekM2RCxrQkFDRSxNQUFNQyxFQUFTLElBQUk5RSxLQUFLNEUsTUFBTTlELGlCQUFpQixrQkFDekNpRSxFQUFjLEdBTXBCLE9BSkFELEVBQU83RCxTQUFRK0QsSUFDYkQsRUFBWUMsRUFBTTNCLE1BQVEyQixFQUFNQyxTQUczQkYsRUFHVEcsb0JBQ0VsRixLQUFLNEUsTUFBTXpDLGlCQUFpQixVQUFVRSxJQUNwQ0EsRUFBSUMsaUJBQ0p0QyxLQUFLMEUsYUFBYTFFLEtBQUs2RSxtQkFDdkI3RSxLQUFLa0UsV0FJVEcsT0FDRU0sTUFBTU4sT0FHUkgsUUFDRVMsTUFBTVQsUUFDTmxFLEtBQUs0RSxNQUFNTyxTQ2pDUixNQUFNQyxFQUFtQnZCLFNBQVM3QyxjQUFjLDRCQUMxQ3FFLEVBQWV4QixTQUFTN0MsY0FBYyx3QkFDdENzRSxFQUFtQnpCLFNBQVM3QyxjQUFjLFlBQzFDdUUsRUFBY0QsRUFBaUJ0RSxjQUFjLGtCQUM3Q3dFLEVBQW9CRixFQUFpQnRFLGNBQWMsbUJBR25EeUUsRUFBYzVCLFNBQVM3QyxjQUFjLGtCQUNyQzBFLEVBQWtCN0IsU0FBUzdDLGNBQWMsc0JBRXpDMkUsRUFBWUQsRUFBZ0IxRSxjQUFjLGVBQzFDNEUsRUFBa0JGLEVBQWdCMUUsY0FBYyxxQkFNaEQ2RSxHQUppQkosRUFBWXpFLGNBQWMscUJBQzFCeUUsRUFBWXpFLGNBQWMscUJBRzlCNkMsU0FBUzdDLGNBQWMsc0JBS3BDOEUsR0FKeUJELEVBQVc3RSxjQUFjLDRCQUN6QjZFLEVBQVc3RSxjQUFjLGlCQUc5QnNFLEVBQWlCdEUsY0FBYyx1QkFDbkQrRSxFQUEyQlQsRUFBaUJ0RSxjQUFjLHFCQUd6QzZDLFNBQVM3QyxjQUFjLGdCQ0xyRCxNQUFNZ0YsRUFBVyxJQ3RCRixNQUNibkcsWUFBWSxHQUFvQixJQUFwQixLQUFDd0QsRUFBRCxXQUFPNEMsR0FBYSxFQUM5QmpHLEtBQUtzRCxNQUFRRCxFQUNickQsS0FBS2tHLFlBQWNELEVBR3JCRSxjQUNFLE1BQU8sQ0FDTDlDLEtBQU1yRCxLQUFLc0QsTUFBTTdCLFlBQ2pCd0UsV0FBWWpHLEtBQUtrRyxZQUFZekUsYUFJakMyRSxZQUFZLEdBQW9CLElBQXBCLEtBQUMvQyxFQUFELFdBQU80QyxHQUFhLEVBQzlCakcsS0FBS3NELE1BQU03QixZQUFjNEIsRUFDekJyRCxLQUFLa0csWUFBWXpFLFlBQWN3RSxJRE9MLENBQUM1QyxLQUFNa0MsRUFBYVUsV0FBWVQsSUFDOURRLEVBQVNJLFlBQVksQ0FBQy9DLEtBQU0sa0JBQW1CNEMsV0FBWSxzQkFFM0QsTUFBTUksRUFBbUIsSUV2QlYsY0FBNkJ0QyxFQUMxQ2xFLFlBQVltRSxHLFFBQ1ZXLE1BQU1YLEcsRUFHRCxJQUFrQixJQUFqQixLQUFDYixFQUFELEtBQU9FLEdBQVUsRUFDdkJzQixNQUFNTixPQUVOLE1BQU1pQyxFQUF5QnRHLEtBQUtvRSxPQUFPcEQsY0FBYyw0QkFDbkR1RixFQUF5QnZHLEtBQUtvRSxPQUFPcEQsY0FBYyxpQkFFekRzRixFQUF1QjdFLFlBQWM0QixFQUNyQ2tELEVBQXVCN0MsSUFBTVAsRUFDN0JvRCxFQUF1QjVDLElBQU1OLEksRUFaSixlLHNCQUFBLEssdURBQUEsSyxTRnNCZSxxQkFHNUMsU0FBU21ELEVBQVdDLEdBQ2xCLE1BQ01DLEVBRE8sSUFBSW5FLEVBQUtrRSxFREhZLGlCQ0dnQkosRUFBaUJoQyxNQUMxQ21DLGFBQ3pCRyxFQUFZQyxRQUFRRixHQUd0QixNQUFNQyxFQUFjLElHbENMLE1BQ2I5RyxZQUFZZ0gsRUFBRCxHQUF1QyxJQUFuQixNQUFDQyxFQUFELFNBQVFDLEdBQVcsRUFDaEQvRyxLQUFLZ0gsT0FBU0YsRUFDZDlHLEtBQUtpSCxVQUFZRixFQUNqQi9HLEtBQUtrSCxXQUFhckQsU0FBUzdDLGNBQWM2RixHQUczQ0QsUUFBUU8sR0FDTm5ILEtBQUtrSCxXQUFXRSxRQUFRRCxHQUcxQkosV0FDRS9HLEtBQUtnSCxPQUFPL0YsU0FBUXdGLElBQ2xCekcsS0FBS2lILFVBQVVSLFFIcUJXLGVBQWdCLENBQzlDSyxNRE4wQixDQUMxQixDQUNFekQsS0FBTSxrQkFDTkYsS0FBTSxvREFFUixDQUNFRSxLQUFNLGNBQ05GLEtBQU0sdURBRVIsQ0FDRUUsS0FBTSxpQkFDTkYsS0FBTSwwREFFUixDQUNFRSxLQUFNLFVBQ05GLEtBQU0sbURBRVIsQ0FDRUUsS0FBTSx3QkFDTkYsS0FBTSxtREFFUixDQUNFRSxLQUFNLGlCQUNORixLQUFNLGlEQ2hCUjRELFNBQVVQLElBRVpHLEVBQVlJLFdBRVosTUFBTU0sRUFBcUIsSUFBSTVDLEVBQWMsNEJBQTRCNkMsSUFDdkV0QixFQUFTSSxZQUFZa0IsTUFHakJDLEVBQXFCLElBQUk5QyxFQUFjLHdCQUF3QjZDLElBQ25FLE1BQU9FLFVBQVduRSxFQUFNb0UsVUFBV3RFLEdBQVFtRSxFQUMzQ2QsRUFBVyxDQUFDbkQsS0FBQUEsRUFBTUYsS0FBQUEsT0FJcEJrRSxFQUFtQm5DLG9CQUNuQnFDLEVBQW1CckMsb0JBRW5CLE1BQU13QyxFQUFlLENBQ25CeEgsY0FBZSxnQkFDZkUscUJBQXNCLHFCQUN0QkUsb0JBQXFCLDZCQUNyQkUsZ0JBQWlCLDBCQUNqQkUsV0FBWSx3QkFHUmlILEVBQW9CLElBQUlDLEVBQWNGLEVBQWNyQyxHQUNwRHdDLEVBQXVCLElBQUlELEVBQWNGLEVBQWN0QyxHQUU3RFUsRUFBa0IzRCxpQkFBaUIsU0FBUyxLQUMxQ2tGLEVBQW1CaEQsT0FDbkIsTUFBTSxLQUFDaEIsRUFBRCxXQUFPNEMsR0FBY0QsRUFBU0csY0FDcENSLEVBQVVWLE1BQVE1QixFQUNsQnVDLEVBQWdCWCxNQUFRZ0IsS0FHMUJGLEVBQXlCNUQsaUJBQWlCLFNBQVMsS0FDakRvRixFQUFtQmxELE9BQ25Cc0QsRUFBa0IvRyxxQkFHcEIrRyxFQUFrQnZGLG1CQUNsQnlGLEVBQXFCekYsbUIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL3NjcmlwdHMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvc2NyaXB0cy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9TZWN0aW9uLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNsYXNzIEZvcm1WYWxpZGF0b3Ige1xyXG4gIGNvbnN0cnVjdG9yKHNldHRpbmdzLCBmb3JtRWxlbWVudCkge1xyXG4gICAgdGhpcy5faW5wdXRTZWxlY3RvciA9IHNldHRpbmdzLmlucHV0U2VsZWN0b3I7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvciA9IHNldHRpbmdzLnN1Ym1pdEJ1dHRvblNlbGVjdG9yO1xyXG4gICAgdGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyA9IHNldHRpbmdzLmluYWN0aXZlQnV0dG9uQ2xhc3M7XHJcbiAgICB0aGlzLl9pbnB1dEVycm9yQ2xhc3MgPSBzZXR0aW5ncy5pbnB1dEVycm9yQ2xhc3M7XHJcbiAgICB0aGlzLl9lcnJvckNsYXNzID0gc2V0dGluZ3MuZXJyb3JDbGFzcztcclxuXHJcbiAgICB0aGlzLl9mb3JtRWxlbWVudCA9IGZvcm1FbGVtZW50O1xyXG4gIH1cclxuXHJcbiAgcmVzZXRWYWxpZGF0aW9uKCkge1xyXG4gICAgY29uc3QgaW5wdXRFbGVtZW50cyA9IFsuLi50aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2lucHV0U2VsZWN0b3IpXTtcclxuICAgIGNvbnN0IGJ1dHRvbkVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcclxuICAgIGlucHV0RWxlbWVudHMuZm9yRWFjaChpbnB1dEVsZW1lbnQgPT4ge1xyXG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xyXG4gICAgfSk7XHJcbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZShpbnB1dEVsZW1lbnRzLCBidXR0b25FbGVtZW50KTtcclxuICB9XHJcblxyXG4gIF9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcclxuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgKTtcclxuXHJcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gJyc7XHJcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9lcnJvckNsYXNzKTtcclxuICB9XHJcblxyXG4gIF90b2dnbGVCdXR0b25TdGF0ZShpbnB1dEVsZW1lbnRzLCBidXR0b25FbGVtZW50KSB7XHJcbiAgICBjb25zdCBoYXNJbnZhbGlkSW5wdXQgPSBpbnB1dEVsZW1lbnRzLnNvbWUoaW5wdXRFbGVtZW50ID0+ICFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpO1xyXG4gICAgaWYgKGhhc0ludmFsaWRJbnB1dCkge1xyXG4gICAgICBidXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICAgIGJ1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgICBidXR0b25FbGVtZW50LmRpc2FibGVkID0gZmFsc2U7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XHJcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XHJcblxyXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcclxuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZTtcclxuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2Vycm9yQ2xhc3MpO1xyXG4gIH1cclxuXHJcbiAgX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpIHtcclxuICAgIGlmIChpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcclxuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICBjb25zdCBpbnB1dEVsZW1lbnRzID0gWy4uLnRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faW5wdXRTZWxlY3RvcildOyAvLyBtYWRlIGFycmF5IG9mIG5vZGVMaXN0XHJcbiAgICBjb25zdCBidXR0b25FbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3Rvcik7XHJcblxyXG4gICAgaW5wdXRFbGVtZW50cy5mb3JFYWNoKGlucHV0RWxlbWVudCA9PiB7XHJcbiAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IHtcclxuICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KTtcclxuICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZShpbnB1dEVsZW1lbnRzLCBidXR0b25FbGVtZW50KTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XHJcbiAgICB0aGlzLl9mb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCBldnQgPT4ge1xyXG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgIH0pO1xyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IEZvcm1WYWxpZGF0b3I7XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xyXG4gIGNvbnN0cnVjdG9yKGNhcmREYXRhLCBjYXJkVGVtcGxhdGVTZWxlY3Rvciwgb25JbWFnZUNsaWNrKSB7XHJcbiAgICB0aGlzLl9uYW1lID0gY2FyZERhdGEubmFtZTtcclxuICAgIHRoaXMuX2xpbmsgPSBjYXJkRGF0YS5saW5rO1xyXG4gICAgdGhpcy5fdGVtcGxhdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNhcmRUZW1wbGF0ZVNlbGVjdG9yKS5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkJyk7XHJcblxyXG4gICAgdGhpcy5fb25JbWFnZUNsaWNrID0gb25JbWFnZUNsaWNrO1xyXG4gIH1cclxuXHJcbiAgX2FkZEV2ZW50TGlzdGVuZXJzID0gKCkgPT4ge1xyXG4gICAgY29uc3QgbGlrZUJ1dHRvbiA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmNhcmRfX2xpa2UtYnRuJyk7XHJcbiAgICBsaWtlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5faGFuZGxlTGlrZUJ1dHRvbik7XHJcblxyXG4gICAgY29uc3QgZGVsZXRlQ2FyZEJ1dHRvbiA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmNhcmRfX2RlbGV0ZS1idG4nKTtcclxuICAgIGRlbGV0ZUNhcmRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLl9oYW5kbGVEZWxldGVCdXR0b24pO1xyXG5cclxuICAgIGNvbnN0IHByZXZpZXdQaWN0dXJlID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZF9faW1nJyk7XHJcbiAgICBwcmV2aWV3UGljdHVyZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuX2hhbmRsZVByZXZpZXdQaWN0dXJlKCkpO1xyXG4gIH07XHJcblxyXG4gIF9oYW5kbGVEZWxldGVCdXR0b24gPSBldnQgPT4ge1xyXG4gICAgZXZ0LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgdGhpcy5fZWxlbWVudC5yZW1vdmUoKTtcclxuICAgIHRoaXMuX2VsZW1lbnQgPSBudWxsO1xyXG4gIH07XHJcblxyXG4gIF9oYW5kbGVMaWtlQnV0dG9uID0gZXZ0ID0+IHtcclxuICAgIGV2dC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgIGV2dC50YXJnZXQuY2xhc3NMaXN0LnRvZ2dsZSgnY2FyZF9fbGlrZS1idG5fYWN0aXZlJyk7XHJcbiAgfTtcclxuXHJcbiAgX2hhbmRsZVByZXZpZXdQaWN0dXJlID0gKCkgPT4ge1xyXG4gICAgdGhpcy5fb25JbWFnZUNsaWNrKHtsaW5rOiB0aGlzLl9saW5rLCBuYW1lOiB0aGlzLl9uYW1lfSk7XHJcbiAgfTtcclxuXHJcbiAgcmVuZGVyQ2FyZCA9ICgpID0+IHtcclxuICAgIHRoaXMuX2VsZW1lbnQgPSB0aGlzLl90ZW1wbGF0ZS5jbG9uZU5vZGUodHJ1ZSk7XHJcbiAgICBjb25zdCBjYXJkSW1hZ2UgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkX19pbWcnKTtcclxuICAgIGNhcmRJbWFnZS5zcmMgPSB0aGlzLl9saW5rO1xyXG4gICAgY2FyZEltYWdlLmFsdCA9IHRoaXMuX25hbWU7XHJcbiAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkX190aXRsZScpLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcclxuICAgIHRoaXMuX2FkZEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4gICAgcmV0dXJuIHRoaXMuX2VsZW1lbnQ7XHJcbiAgfTtcclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgdGhpcy5fcG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xyXG4gIH1cclxuXHJcbiAgb3BlbigpIHtcclxuICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5hZGQoJ3BvcHVwX3Zpc2libGUnKTtcclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gICAgdGhpcy5fcG9wdXAuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgdGhpcy5faGFuZGxlTW91c2VEb3duKTtcclxuICB9XHJcblxyXG4gIGNsb3NlKCkge1xyXG4gICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LnJlbW92ZSgncG9wdXBfdmlzaWJsZScpO1xyXG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5dXAnLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgICB0aGlzLl9wb3B1cC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCB0aGlzLl9oYW5kbGVNb3VzZURvd24pO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZU1vdXNlRG93biA9IGV2dCA9PiB7XHJcbiAgICBpZiAoZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3BvcHVwJykgfHwgZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3BvcHVwX19jbG9zZS1idG4nKSkge1xyXG4gICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgX2hhbmRsZUVzY0Nsb3NlID0gZXZ0ID0+IHtcclxuICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgaWYgKGV2dC5rZXkgPT09ICdFc2NhcGUnKSB7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH1cclxuICB9O1xyXG59XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tICcuL1BvcHVwLmpzJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgaGFuZGxlU3VibWl0KSB7XHJcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTsgLy8gdGhpcy5fcG9wdXBcclxuICAgIHRoaXMuaGFuZGxlU3VibWl0ID0gaGFuZGxlU3VibWl0O1xyXG4gICAgdGhpcy5fZm9ybSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fZm9ybScpO1xyXG4gIH1cclxuXHJcbiAgX2dldElucHV0VmFsdWVzKCkge1xyXG4gICAgY29uc3QgaW5wdXRzID0gWy4uLnRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvckFsbCgnLnBvcHVwX19pbnB1dCcpXTtcclxuICAgIGNvbnN0IGlucHV0VmFsdWVzID0ge307XHJcblxyXG4gICAgaW5wdXRzLmZvckVhY2goaW5wdXQgPT4ge1xyXG4gICAgICBpbnB1dFZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xyXG4gICAgfSk7XHJcblxyXG4gICAgcmV0dXJuIGlucHV0VmFsdWVzO1xyXG4gIH1cclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIGV2dCA9PiB7XHJcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICB0aGlzLmhhbmRsZVN1Ym1pdCh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBvcGVuKCkge1xyXG4gICAgc3VwZXIub3BlbigpO1xyXG4gIH1cclxuXHJcbiAgY2xvc2UoKSB7XHJcbiAgICBzdXBlci5jbG9zZSgpO1xyXG4gICAgdGhpcy5fZm9ybS5yZXNldCgpO1xyXG4gIH1cclxufVxyXG4iLCIvLyBFbGVtZW50c1xyXG5leHBvcnQgY29uc3QgZWRpdFByb2ZpbGVQb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF90eXBlX2VkaXQtcHJvZmlsZScpO1xyXG5leHBvcnQgY29uc3QgYWRkQ2FyZFBvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX3R5cGVfYWRkLWNhcmQnKTtcclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZScpO1xyXG5leHBvcnQgY29uc3QgcHJvZmlsZU5hbWUgPSBwcm9maWxlQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19uYW1lJyk7XHJcbmV4cG9ydCBjb25zdCBwcm9maWxlUHJvZmVzc2lvbiA9IHByb2ZpbGVDb250YWluZXIucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2Fib3V0Jyk7XHJcblxyXG4vLyBGb3JtcyBlbGVtZW50c1xyXG5leHBvcnQgY29uc3QgY2FyZEFkZEZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjYWRkLWNhcmQtZm9ybScpO1xyXG5leHBvcnQgY29uc3QgZWRpdFByb2ZpbGVGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2VkaXQtcHJvZmlsZS1mb3JtJyk7XHJcblxyXG5leHBvcnQgY29uc3QgbmFtZUlucHV0ID0gZWRpdFByb2ZpbGVGb3JtLnF1ZXJ5U2VsZWN0b3IoJyNpbnB1dC1uYW1lJyk7XHJcbmV4cG9ydCBjb25zdCBwcm9mZXNzaW9uSW5wdXQgPSBlZGl0UHJvZmlsZUZvcm0ucXVlcnlTZWxlY3RvcignI2lucHV0LXByb2Zlc3Npb24nKTtcclxuXHJcbmV4cG9ydCBjb25zdCBjYXJkSW5wdXRUaXRsZSA9IGNhcmRBZGRGb3JtLnF1ZXJ5U2VsZWN0b3IoJyNpbnB1dC1jYXJkLXRpdGxlJyk7XHJcbmV4cG9ydCBjb25zdCBpbWFnZUlucHV0TGluayA9IGNhcmRBZGRGb3JtLnF1ZXJ5U2VsZWN0b3IoJyNpbnB1dC1pbWFnZS1saW5rJyk7XHJcblxyXG4vLyBJbWFnZSBQb3B1cCBFbGVtZW50c1xyXG5leHBvcnQgY29uc3QgaW1hZ2VQb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF90eXBlX2ltYWdlJyk7XHJcbmV4cG9ydCBjb25zdCBpbWFnZVBvcHVwVGl0bGVFbGVtZW50ID0gaW1hZ2VQb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX3RpdGxlX3R5cGVfaW1hZ2UnKTtcclxuZXhwb3J0IGNvbnN0IGltYWdlUG9wdXBJbWFnZUVsZW1lbnQgPSBpbWFnZVBvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faW1hZ2UnKTtcclxuXHJcbi8vQnV0dG9uc1xyXG5leHBvcnQgY29uc3QgcHJvZmlsZUVkaXRCdXR0b24gPSBwcm9maWxlQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19lZGl0LWJ0bicpO1xyXG5leHBvcnQgY29uc3QgcHJvZmlsZUFkZENhcmRGb3JtQnV0dG9uID0gcHJvZmlsZUNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fYWRkLWJ0bicpO1xyXG5cclxuZXhwb3J0IGNvbnN0IGNhcmRUZW1wbGF0ZVNlbGVjdG9yID0gJyNjYXJkLXRlbXBsYXRlJztcclxuZXhwb3J0IGNvbnN0IGNhcmRzQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNhcmRzX19saXN0Jyk7XHJcblxyXG5leHBvcnQgY29uc3QgaW5pdGlhbENhcmRzID0gW1xyXG4gIHtcclxuICAgIG5hbWU6ICdZb3NlbWl0ZSBWYWxsZXknLFxyXG4gICAgbGluazogJ2h0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL3lvc2VtaXRlLmpwZydcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6ICdMYWtlIExvdWlzZScsXHJcbiAgICBsaW5rOiAnaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvbGFrZS1sb3Vpc2UuanBnJ1xyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogJ0JhbGQgTW91bnRhaW5zJyxcclxuICAgIGxpbms6ICdodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS9iYWxkLW1vdW50YWlucy5qcGcnXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiAnTGF0ZW1hcicsXHJcbiAgICBsaW5rOiAnaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvbGF0ZW1hci5qcGcnXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiAnVmFub2lzZSBOYXRpb25hbCBQYXJrJyxcclxuICAgIGxpbms6ICdodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS92YW5vaXNlLmpwZydcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6ICdMYWdvIGRpIEJyYWllcycsXHJcbiAgICBsaW5rOiAnaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvbGFnby5qcGcnXHJcbiAgfVxyXG5dO1xyXG4iLCJpbXBvcnQgJy4uLy4uL3BhZ2VzL2luZGV4LmNzcyc7XHJcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gJy4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyc7XHJcbmltcG9ydCBDYXJkIGZyb20gJy4uL2NvbXBvbmVudHMvQ2FyZC5qcyc7XHJcbmltcG9ydCBTZWN0aW9uIGZyb20gJy4uL2NvbXBvbmVudHMvU2VjdGlvbi5qcyc7XHJcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tICcuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlJztcclxuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSAnLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtJztcclxuXHJcbmltcG9ydCB7XHJcbiAgaW5pdGlhbENhcmRzLFxyXG4gIGVkaXRQcm9maWxlUG9wdXAsXHJcbiAgYWRkQ2FyZFBvcHVwLFxyXG4gIHByb2Zlc3Npb25JbnB1dCxcclxuICBuYW1lSW5wdXQsXHJcbiAgcHJvZmlsZU5hbWUsXHJcbiAgcHJvZmlsZVByb2Zlc3Npb24sXHJcbiAgcHJvZmlsZUVkaXRCdXR0b24sXHJcbiAgcHJvZmlsZUFkZENhcmRGb3JtQnV0dG9uLFxyXG4gIGNhcmRzQ29udGFpbmVyLFxyXG4gIGNhcmRUZW1wbGF0ZVNlbGVjdG9yXHJcbn0gZnJvbSAnLi4vdXRpbHMvY29uc3RhbnRzLmpzJztcclxuaW1wb3J0IFVzZXJJbmZvIGZyb20gJy4uL2NvbXBvbmVudHMvVXNlckluZm8uanMnO1xyXG5cclxuY29uc3QgdXNlckluZm8gPSBuZXcgVXNlckluZm8oe25hbWU6IHByb2ZpbGVOYW1lLCBwcm9mZXNzaW9uOiBwcm9maWxlUHJvZmVzc2lvbn0pO1xyXG51c2VySW5mby5zZXRVc2VySW5mbyh7bmFtZTogJ0FicmFoYW0gTGluY29sbicsIHByb2Zlc3Npb246ICdBIGZvdW5kaW5nIEZhdGhlcid9KTtcclxuXHJcbmNvbnN0IGltYWdlUG9wdXBXaW5kb3cgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoJy5wb3B1cF90eXBlX2ltYWdlJyk7XHJcbi8vIEluaXRpYWxpemUgNiBjYXJkc1xyXG5cclxuZnVuY3Rpb24gcmVuZGVyQ2FyZChpdGVtKSB7XHJcbiAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKGl0ZW0sIGNhcmRUZW1wbGF0ZVNlbGVjdG9yLCBpbWFnZVBvcHVwV2luZG93Lm9wZW4pO1xyXG4gIGNvbnN0IGNhcmRFbGVtZW50ID0gY2FyZC5yZW5kZXJDYXJkKCk7XHJcbiAgY2FyZFNlY3Rpb24uYWRkSXRlbShjYXJkRWxlbWVudCk7XHJcbn1cclxuXHJcbmNvbnN0IGNhcmRTZWN0aW9uID0gbmV3IFNlY3Rpb24oJy5jYXJkc19fbGlzdCcsIHtcclxuICBpdGVtczogaW5pdGlhbENhcmRzLFxyXG4gIHJlbmRlcmVyOiByZW5kZXJDYXJkXHJcbn0pO1xyXG5jYXJkU2VjdGlvbi5yZW5kZXJlcigpO1xyXG5cclxuY29uc3QgcHJvZmlsZVBvcHVwV2luZG93ID0gbmV3IFBvcHVwV2l0aEZvcm0oJy5wb3B1cF90eXBlX2VkaXQtcHJvZmlsZScsIGRhdGEgPT4ge1xyXG4gIHVzZXJJbmZvLnNldFVzZXJJbmZvKGRhdGEpO1xyXG59KTtcclxuXHJcbmNvbnN0IGFkZENhcmRQb3B1cFdpbmRvdyA9IG5ldyBQb3B1cFdpdGhGb3JtKCcucG9wdXBfdHlwZV9hZGQtY2FyZCcsIGRhdGEgPT4ge1xyXG4gIGNvbnN0IHtjYXJkdGl0bGU6IG5hbWUsIGltYWdlbGluazogbGlua30gPSBkYXRhO1xyXG4gIHJlbmRlckNhcmQoe25hbWUsIGxpbmt9KTtcclxufSk7XHJcblxyXG4vLyBpbWFnZVBvcHVwV2luZG93LnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbnByb2ZpbGVQb3B1cFdpbmRvdy5zZXRFdmVudExpc3RlbmVycygpO1xyXG5hZGRDYXJkUG9wdXBXaW5kb3cuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbmNvbnN0IGZvcm1TZXR0aW5ncyA9IHtcclxuICBpbnB1dFNlbGVjdG9yOiAnLnBvcHVwX19pbnB1dCcsXHJcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6ICcucG9wdXBfX3N1Ym1pdC1idG4nLFxyXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6ICdwb3B1cF9fc3VibWl0LWJ0bl9kaXNhYmxlZCcsXHJcbiAgaW5wdXRFcnJvckNsYXNzOiAncG9wdXBfX2lucHV0X3R5cGVfZXJyb3InLFxyXG4gIGVycm9yQ2xhc3M6ICdwb3B1cF9fZXJyb3JfdmlzaWJsZSdcclxufTtcclxuXHJcbmNvbnN0IGNhcmRGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoZm9ybVNldHRpbmdzLCBhZGRDYXJkUG9wdXApO1xyXG5jb25zdCBwcm9maWxlRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKGZvcm1TZXR0aW5ncywgZWRpdFByb2ZpbGVQb3B1cCk7XHJcblxyXG5wcm9maWxlRWRpdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICBwcm9maWxlUG9wdXBXaW5kb3cub3BlbigpO1xyXG4gIGNvbnN0IHtuYW1lLCBwcm9mZXNzaW9ufSA9IHVzZXJJbmZvLmdldFVzZXJJbmZvKCk7IC8vIGdldCBvYmplY3Qgb2YgY3VycmVudCBuYW1lIGFuZCBwcm9mZXNzaW9uXHJcbiAgbmFtZUlucHV0LnZhbHVlID0gbmFtZTtcclxuICBwcm9mZXNzaW9uSW5wdXQudmFsdWUgPSBwcm9mZXNzaW9uO1xyXG59KTtcclxuXHJcbnByb2ZpbGVBZGRDYXJkRm9ybUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICBhZGRDYXJkUG9wdXBXaW5kb3cub3BlbigpO1xyXG4gIGNhcmRGb3JtVmFsaWRhdG9yLnJlc2V0VmFsaWRhdGlvbigpO1xyXG59KTtcclxuXHJcbmNhcmRGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxucHJvZmlsZUZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XHJcbiAgY29uc3RydWN0b3Ioe25hbWUsIHByb2Zlc3Npb259KSB7XHJcbiAgICB0aGlzLl9uYW1lID0gbmFtZTtcclxuICAgIHRoaXMuX3Byb2Zlc3Npb24gPSBwcm9mZXNzaW9uO1xyXG4gIH1cclxuXHJcbiAgZ2V0VXNlckluZm8oKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBuYW1lOiB0aGlzLl9uYW1lLnRleHRDb250ZW50LFxyXG4gICAgICBwcm9mZXNzaW9uOiB0aGlzLl9wcm9mZXNzaW9uLnRleHRDb250ZW50XHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgc2V0VXNlckluZm8oe25hbWUsIHByb2Zlc3Npb259KSB7XHJcbiAgICB0aGlzLl9uYW1lLnRleHRDb250ZW50ID0gbmFtZTtcclxuICAgIHRoaXMuX3Byb2Zlc3Npb24udGV4dENvbnRlbnQgPSBwcm9mZXNzaW9uO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSAnLi9Qb3B1cC5qcyc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIG9wZW4gPSAoe2xpbmssIG5hbWV9KSA9PiB7XHJcbiAgICBzdXBlci5vcGVuKCk7XHJcblxyXG4gICAgY29uc3QgaW1hZ2VQb3B1cFRpdGxlRWxlbWVudCA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fdGl0bGVfdHlwZV9pbWFnZScpO1xyXG4gICAgY29uc3QgaW1hZ2VQb3B1cEltYWdlRWxlbWVudCA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faW1hZ2UnKTtcclxuXHJcbiAgICBpbWFnZVBvcHVwVGl0bGVFbGVtZW50LnRleHRDb250ZW50ID0gbmFtZTtcclxuICAgIGltYWdlUG9wdXBJbWFnZUVsZW1lbnQuc3JjID0gbGluaztcclxuICAgIGltYWdlUG9wdXBJbWFnZUVsZW1lbnQuYWx0ID0gbmFtZTtcclxuICB9O1xyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xyXG4gIGNvbnN0cnVjdG9yKGNvbnRhaW5lclNlbGVjdG9yLCB7aXRlbXMsIHJlbmRlcmVyfSkge1xyXG4gICAgdGhpcy5faXRlbXMgPSBpdGVtcztcclxuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XHJcbiAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIGFkZEl0ZW0oZWxlbWVudCkge1xyXG4gICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoZWxlbWVudCk7XHJcbiAgfVxyXG5cclxuICByZW5kZXJlcigpIHtcclxuICAgIHRoaXMuX2l0ZW1zLmZvckVhY2goaXRlbSA9PiB7XHJcbiAgICAgIHRoaXMuX3JlbmRlcmVyKGl0ZW0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcbiJdLCJuYW1lcyI6WyJjb25zdHJ1Y3RvciIsInNldHRpbmdzIiwiZm9ybUVsZW1lbnQiLCJ0aGlzIiwiX2lucHV0U2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwiX3N1Ym1pdEJ1dHRvblNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfaW5hY3RpdmVCdXR0b25DbGFzcyIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJfaW5wdXRFcnJvckNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiX2Vycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiX2Zvcm1FbGVtZW50IiwicmVzZXRWYWxpZGF0aW9uIiwiaW5wdXRFbGVtZW50cyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJidXR0b25FbGVtZW50IiwicXVlcnlTZWxlY3RvciIsImZvckVhY2giLCJpbnB1dEVsZW1lbnQiLCJfaGlkZUlucHV0RXJyb3IiLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJlcnJvckVsZW1lbnQiLCJpZCIsImNsYXNzTGlzdCIsInJlbW92ZSIsInRleHRDb250ZW50Iiwic29tZSIsInZhbGlkaXR5IiwidmFsaWQiLCJhZGQiLCJkaXNhYmxlZCIsIl9zaG93SW5wdXRFcnJvciIsInZhbGlkYXRpb25NZXNzYWdlIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsIl9zZXRFdmVudExpc3RlbmVycyIsImFkZEV2ZW50TGlzdGVuZXIiLCJlbmFibGVWYWxpZGF0aW9uIiwiZXZ0IiwicHJldmVudERlZmF1bHQiLCJDYXJkIiwiY2FyZERhdGEiLCJjYXJkVGVtcGxhdGVTZWxlY3RvciIsIm9uSW1hZ2VDbGljayIsIl9lbGVtZW50IiwiX2hhbmRsZUxpa2VCdXR0b24iLCJfaGFuZGxlRGVsZXRlQnV0dG9uIiwiX2hhbmRsZVByZXZpZXdQaWN0dXJlIiwic3RvcFByb3BhZ2F0aW9uIiwidGFyZ2V0IiwidG9nZ2xlIiwiX29uSW1hZ2VDbGljayIsImxpbmsiLCJfbGluayIsIm5hbWUiLCJfbmFtZSIsIl90ZW1wbGF0ZSIsImNsb25lTm9kZSIsImNhcmRJbWFnZSIsInNyYyIsImFsdCIsIl9hZGRFdmVudExpc3RlbmVycyIsImRvY3VtZW50IiwiY29udGVudCIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsImNvbnRhaW5zIiwiY2xvc2UiLCJrZXkiLCJfcG9wdXAiLCJvcGVuIiwiX2hhbmRsZUVzY0Nsb3NlIiwiX2hhbmRsZU1vdXNlRG93biIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJQb3B1cFdpdGhGb3JtIiwiaGFuZGxlU3VibWl0Iiwic3VwZXIiLCJfZm9ybSIsIl9nZXRJbnB1dFZhbHVlcyIsImlucHV0cyIsImlucHV0VmFsdWVzIiwiaW5wdXQiLCJ2YWx1ZSIsInNldEV2ZW50TGlzdGVuZXJzIiwicmVzZXQiLCJlZGl0UHJvZmlsZVBvcHVwIiwiYWRkQ2FyZFBvcHVwIiwicHJvZmlsZUNvbnRhaW5lciIsInByb2ZpbGVOYW1lIiwicHJvZmlsZVByb2Zlc3Npb24iLCJjYXJkQWRkRm9ybSIsImVkaXRQcm9maWxlRm9ybSIsIm5hbWVJbnB1dCIsInByb2Zlc3Npb25JbnB1dCIsImltYWdlUG9wdXAiLCJwcm9maWxlRWRpdEJ1dHRvbiIsInByb2ZpbGVBZGRDYXJkRm9ybUJ1dHRvbiIsInVzZXJJbmZvIiwicHJvZmVzc2lvbiIsIl9wcm9mZXNzaW9uIiwiZ2V0VXNlckluZm8iLCJzZXRVc2VySW5mbyIsImltYWdlUG9wdXBXaW5kb3ciLCJpbWFnZVBvcHVwVGl0bGVFbGVtZW50IiwiaW1hZ2VQb3B1cEltYWdlRWxlbWVudCIsInJlbmRlckNhcmQiLCJpdGVtIiwiY2FyZEVsZW1lbnQiLCJjYXJkU2VjdGlvbiIsImFkZEl0ZW0iLCJjb250YWluZXJTZWxlY3RvciIsIml0ZW1zIiwicmVuZGVyZXIiLCJfaXRlbXMiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwiZWxlbWVudCIsInByZXBlbmQiLCJwcm9maWxlUG9wdXBXaW5kb3ciLCJkYXRhIiwiYWRkQ2FyZFBvcHVwV2luZG93IiwiY2FyZHRpdGxlIiwiaW1hZ2VsaW5rIiwiZm9ybVNldHRpbmdzIiwiY2FyZEZvcm1WYWxpZGF0b3IiLCJGb3JtVmFsaWRhdG9yIiwicHJvZmlsZUZvcm1WYWxpZGF0b3IiXSwic291cmNlUm9vdCI6IiJ9